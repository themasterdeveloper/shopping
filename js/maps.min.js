"use strict";var maps={ICON_FAST_FOOD:"/img/rsz_fastfood-pin-2.png",ICON_DELIVERY_MAN:"/img/fastfood-worker-64-255355.png",save_area_location:function(d,c,a){var b={action:"save_area_location",area_id:d,lat:c,lng:a};common.log("save_area_location",b);$.ajax({data:b,dataType:"json",success:function(e){common.log("save_area_location",e);if(e[0].error!==0){common.showErr(e[0].message)}else{common.showMsg(e[0].message)}}})},save_shop_location:function(e,b,d,a){var c={action:"save_shop_location",area_id:e,shop_id:b,lat:d,lng:a};common.log("save_shop_location",c);$.ajax({data:c,dataType:"json",success:function(f){common.log("save_shop_location",f);if(f[0].error!==0){common.showErr(f[0].message)}else{common.showMsg(f[0].message);maps.update_markers()}}})},load_shops_locations:function(b){var a={action:"shops_locations_list",area_id:0};common.log("load_shops_locations",a);$.ajax({data:a,success:function(c){common.log("load_shops_locations",c);maps.setMarkers(c,"shop",maps.ICON_FAST_FOOD)}})},load_deliverers_locations:function(b){var a={action:"deliverers_list"};common.log("deliverers_list",a);$.ajax({data:a,success:function(c){common.log("deliverers_list",c);maps.setMarkers(c,"name",maps.ICON_DELIVERY_MAN)}})},setMarkers:function(d,f,e){for(var a=0;a<d.length;a++){var c=d[a];var b=new google.maps.LatLng(c.lat,c.lng);maps.createMarker(b,f,e,c)}},createMarker:function(e,d,c,b){var a=new google.maps.Marker({position:e,map:map,title:b[d],icon:c});a.set("id",b.id);a.addListener("click",function(){$("#item_id").val(b.id);maps.showMarkerData(b)});markers.push(a)},showMarkerData:function(d){var b="";var c="-id-lat-lng-photo-available-";for(var a in d){if(c.indexOf("-"+a+"-")===-1){b+='<span class="_data-value">';b+=d[a];b+="</span></br>"}}$(".marker-data").html(b)},remove_markers:function(){for(var a=0;a<markers.length;a++){markers[a].setMap(null)}},close_infowindows:function(){for(var a=0;a<infowindows.length;a++){infowindows[a].close()}},relocateMap:function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(a){lat=a.coords.latitude;lng=a.coords.longitude;var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);me_marker.setPosition(b)})}},update_markers:function(){maps.remove_markers();maps.load_shops_locations(0)},save_location:function(b){var a={action:"save_location",token:cookies.getCookie("token"),lat:b.lat,lng:b.lng};common.log("save_location",a);$.ajax({data:a,success:function(c){common.log("save_location",c)},error:function(c){common.log("save_location.error",c)}})},update_deliverer_location:function(b){var a={action:"update_deliverer_location",deliverer_id:cookies.getCookie("deliverer_id"),lat:b.lat,lng:b.lng};common.log("update_deliverer_location",a);$.ajax({data:a,success:function(c){common.log("update_deliverer_location",c)},error:function(c){common.log("update_deliverer_location.error",c)}});set_deliverer_coordinates(cookies.getCookie("order_id"));setTimeout(function(){update_deliverer_location()},10000)}};