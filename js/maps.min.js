save_area_location=function(d,c,a){var b={};b.action="save_area_location";b.area_id=d;b.lat=c;b.lng=a;log("save_area_location",b);$.ajax({data:b,dataType:"json",success:function(e){log("save_area_location",e);if(e[0].error!=0){showErr(e[0].message)}else{showMsg(e[0].message)}}})};save_shop_location=function(e,b,d,a){var c={};c.action="save_shop_location";c.area_id=e;c.shop_id=b;c.lat=d;c.lng=a;log("save_shop_location",c);$.ajax({data:c,dataType:"json",success:function(f){log("save_shop_location",f);if(f[0].error!=0){showErr(f[0].message)}else{showMsg(f[0].message);update_markers()}}})};load_shops_locations=function(b){var a={};a.action="shops_locations_list";a.area_id=0;log("load_shops_locations",a);$.ajax({data:a,success:function(c){log("load_shops_locations",c);setMarkers(c,"shop","/img/rsz_fastfood-pin.png")}})};load_deliverers_locations=function(b){var a={};a.action="deliverers_list";log("deliverers_list",a);$.ajax({data:a,success:function(c){log("deliverers_list",c);setMarkers(c,"name","/img/fastfood-worker-24-255355.png")}})};setMarkers=function(d,f,e){for(var a=0;a<d.length;a++){var c=d[a];var b=new google.maps.LatLng(c.lat,c.lng);createMarker(b,f,e,c)}};createMarker=function(e,d,c,b){var a=new google.maps.Marker({position:e,map:map,title:b[d],icon:c});a.set("id",b.id);a.addListener("click",function(){$("#item_id").val(b.id);showMarkerData(b)});markers.push(a)};showMarkerData=function(d){var b="";$this=d[0];var c="-id-lat-lng-photo-available-";for(var a in d){if(c.indexOf("-"+a+"-")==-1){b+='<span class="_data-value">';b+=d[a];b+="</span></br>"}}$(".marker-data").html(b)};remove_markers=function(){for(i=0;i<markers.length;i++){markers[i].setMap(null)}};close_infowindows=function(){for(i=0;i<infowindows.length;i++){infowindows[i].close()}};relocateMap=function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(a){lat=a.coords.latitude;lng=a.coords.longitude;initialLocation=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);me_marker.setPosition(initialLocation)})}};