var col_names=[];var webservice_path="/ws/delivery.php",record_id,cur_page=0,error=false;$.ajaxSetup({url:webservice_path});var deliverer_login=function(){var a={};a.action="deliverer_login";$("#login").find(":input:not(button):not(reset)").each(function(){var b=$(this);if(b.attr("id")){a[b.attr("id")]=b.val().trim()}});log("deliverer_login",a);$.ajax({data:a,success:function(b){log("deliverer_login",b);if(b[0].user_id){document.getElementById("id01").style.display="none";load("home.html");$this=b[0];for(key in $this){setCookie(key,$this[key])}}else{showErr("Email or password incorrect")}}})};var get_orders=function(){var a={};a.action="delivery_get_orders";a.deliverer_id=getCookie("user_id");log("get_orders",a);$.ajax({data:a,success:function(c){log("get_orders",c);for(var b=0;b<c.length;b++){$this=c[b];add_orders_buttons($this)}}})};var add_orders_buttons=function(b){var a='<a href="javascript:void(0)" class="form-control btn btn-primary btn-lg btn-options" onclick="load_order('+b.id+')">';a+='<span class="glyphicon glyphicon-pencil"></span>';a+=b.number;a+="</a>";$(".data").append(a)};var get_order=function(){var a={};a.action="delivery_get_order";a.order_id=getCookie("order_id");log("get_order",a);$.ajax({data:a,success:function(b){log("get_order",b);add_order_data(b[0]);setCookie("order_status",b[0].status)}})};var get_address=function(){var a={};a.action="delivery_get_address";a.order_id=getCookie("order_id");log("get_address",a);$.ajax({data:a,success:function(b){log("get_address",b);add_order_data(b[0])}})};var get_shops=function(){var a={};a.action="delivery_get_shops";a.order_id=getCookie("order_id");log("get_shops",a);$.ajax({data:a,success:function(c){log("get_shops",c);for(var b=0;b<c.length;b++){$this=c[b];add_shops($this)}}})};var add_order_data=function(d){var c=[];var a=0;var b='<div class="order-data-key">{key}:';b+='<div class="order-data-value"><strong>{value}</strong></div>';for(key in d){c[a]=b.replace("{key}",key).replace("{value}",d[key]);a++}$(".data").html(c.join(""))};var add_shops=function(b){var a='<a href="javascript:void(0)" class="btn btn-success btn-md shops" onclick="load_shop_data('+b.id+')">';a+=b.name;a+="</a>";$(".data").append(a)};var load_shop_data=function(a){$(".items tbody").empty();var b={};b.action="delivery_get_shop_items";b.order_id=getCookie("order_id");b.shop_id=a;log("load_shop_data",b);$.ajax({data:b,success:function(f){log("load_shop_data",f);var d=[];var c=0;d[c]="<tr>";c++;for(key in f[0]){d[c]="<th>"+key+"</th>";c++}d[c]="</tr>";$(".items thead").html(d.join(""));var e=0;for(var c=0;c<f.length;c++){$this=f[c];e+=parseFloat(f[c].total.replace(",",""));add_shop_items($this)}$(".items tfoot").html("<tr><td colspan=3></td><td>"+e.toFixed(2)+"</td></tr>");$(".table-responsive").show()}})};var add_shop_items=function(c){var b=[];var a=0;b[a]="<tr>";a++;for(key in c){b[a]="<td>"+c[key]+"</td>";a++}b[a]="</tr>";$(".items tbody").append(b.join(""))};var order_picked=function(b){var a={};a.action="delivery_order_picked";a.order_id=getCookie("order_id");log("delivery_order_picked",a);$.ajax({data:a,success:function(c){log("order_picked",c);$(".go-picked").addClass("hidden");load("order")}})};var order_delivered=function(b){var a={};a.action="delivery_order_delivered";a.order_id=getCookie("order_id");log("delivery_order_delivered",a);$.ajax({data:a,success:function(c){log("delivery_order_delivered",c);$(".go-delivered").addClass("hidden");load("order")}})};